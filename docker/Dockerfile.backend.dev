# Use an official Node.js runtime as a parent image
FROM node:22-alpine

# Set the working directory in the container
WORKDIR /app/SparkyFitnessServer

# Copy package.json and package-lock.json (or pnpm-lock.yaml)
COPY package*.json ./
# If you are using pnpm, you would copy pnpm-lock.yaml instead
# COPY pnpm-lock.yaml ./

# Install app dependencies
# Using npm ci for reproducible builds
RUN npm ci

# Copy the rest of your application's code
COPY . .

# The new express-list-endpoints module will be installed and available.
# The container will be run using the command from docker-compose, so no CMD is needed here.
